package com.example.mapper;

import java.util.List;

import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Many;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;
import org.apache.ibatis.annotations.Results;
import org.apache.ibatis.annotations.Select;
import org.apache.ibatis.annotations.Update;

import com.example.model.Dept;
import com.example.model.Emp;

@Mapper
public interface DeptMapper {
	
	@Select("""
			select  *
			  from emp
			 where deptno = #{deptno}
			""")
	List<Emp> selectEmps(int deptno);
	
	
	@Select("select * from dept")
	List<Dept> selectAll(); 
	
	@Select("select * from dept")
	@Results({
		@Results(property = "emps", column = "deptno", many = @Many);
	})
	List<Dept> selectAllWithEmps(); 
	
	
	
	@Select ("""
			select  * 
			  from dept
			 where deptno = #{deptno}
			""")
	Dept selectByDeptno(@Param("deptno") int deptno);

	@Insert("""
			insert into dept 
			values
			(#{deptno}, #{dname, jdbcType=VARCHAR}, #{loc, jdbcType=VARCHAR})
			""")
	
	int insert(@Param("deptno")   int deptno, 
			   @Param("dname") String dname, 
			   @Param("loc")   String loc);
	
	@Insert("""
			insert into dept
			  values(
			  	#{d.deptno},
			  	#{d.dname, jdbcType=VARCHAR},
			  	#{d.loc, 	jdbcType=VARCHAR}
			  )
			
			""")
	int insertDept(@Param("d") Dept dept);
	
	@Update("""
			update dept
			   set dname = #{d.dname, jdbcType=VARCHAR},
			   	   loc   = #{d.loc,   jdbcType=VARCHAR}
			 where deptno = #{d.deptno}
			""")
	int updateDept(@Param("d") Dept dept);
	
}
